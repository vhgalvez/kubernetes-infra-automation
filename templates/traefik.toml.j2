[entryPoints]
  [entryPoints.web]
    address = ":80"
  [entryPoints.websecure]
    address = ":443"
  [entryPoints.k8sApi]
    address = ":6443"

[api]
  dashboard = true
  insecure = true

[providers.docker]
  endpoint = "unix:///var/run/docker.sock"
  exposedByDefault = false

[log]
  level = "DEBUG"

[accessLog]

[certificatesResolvers.myresolver.acme]
  email = "{{ letsencrypt_email }}"
  storage = "/letsencrypt/acme.json"
  [certificatesResolvers.myresolver.acme.httpChallenge]
    entryPoint = "web"

[http.routers]
  [http.routers.api]
    entryPoints = ["websecure"]
    service = "api@internal"
    rule = "Host(`load_balancer1.cefaslocalserver.com`)"

  [http.routers.k8sApi]
    entryPoints = ["k8sApi"]
    service = "k8sApi"
    rule = "Host(`api.okd-cluster.cefaslocalserver.com`)"

[http.services]
  [http.services.k8sApi.loadBalancer]
    [[http.services.k8sApi.loadBalancer.servers]]
      url = "https://master1.cefaslocalserver.com:6443"
    [[http.services.k8sApi.loadBalancer.servers]]
      url = "https://master2.cefaslocalserver.com:6443"
    [[http.services.k8sApi.loadBalancer.servers]]
      url = "https://master3.cefaslocalserver.com:6443"

[experimental]
  [experimental.fastProxy]
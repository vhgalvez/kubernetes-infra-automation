[entryPoints]
  [entryPoints.web]
    address = ":80"

  [entryPoints.websecure]
    address = ":443"
    [entryPoints.websecure.http.tls]
      certResolver = "default"

[api]
  dashboard = true
  insecure = true

[log]
  level = "DEBUG"

[providers]
  [providers.docker]
    endpoint = "unix:///var/run/docker.sock"
    watch = true
    exposedByDefault = false

[http.routers]
  [http.routers.whoami]
    entryPoints = ["web"]
    rule = "Host(`whoami.localhost`)"
    service = "whoami"

  [http.routers.whoami-secure]
    entryPoints = ["websecure"]
    rule = "Host(`whoami.localhost`)"
    service = "whoami"
    [http.routers.whoami-secure.tls]
      certResolver = "default"

  [http.routers.k8sApi]
    entryPoints = ["websecure"]
    rule = "Host(`k8sapi.localhost`)"
    service = "k8sApi"
    [http.routers.k8sApi.tls]
      certResolver = "default"

[http.services]
  [http.services.whoami.loadBalancer]
    [[http.services.whoami.loadBalancer.servers]]
      url = "http://simple-service:80"

  [http.services.k8sApi.loadBalancer]
    [[http.services.k8sApi.loadBalancer.servers]]
      url = "https://master1.cefaslocalserver.com:6443"
    [[http.services.k8sApi.loadBalancer.servers]]
      url = "https://master2.cefaslocalserver.com:6443"
    [[http.services.k8sApi.loadBalancer.servers]]
      url = "https://master3.cefaslocalserver.com:6443"

[certificatesResolvers]
  [certificatesResolvers.default]
    [certificatesResolvers.default.acme]
      email = "tu-email@dominio.com"
      storage = "/etc/traefik/letsencrypt/acme.json"
      caServer = "https://acme-v02.api.letsencrypt.org/directory"
      httpChallenge = {}